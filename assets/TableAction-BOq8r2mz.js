import{i as ht,p as vt,r as O,N as c,w as _e,c as _,m as V,k as $e,y as Fe,Y as ae,n as Ge,a1 as le,a8 as gt,Q as G,R as I,l as pt,S as H,a2 as re,a3 as W,s as ye,a4 as U,j as Ce,a5 as ce,$ as Te,o as Ke,F as Je,q as Re,a9 as Ze,a0 as et,aa as wt,ab as bt}from"./vue-iyKSyPgD.js";import{i as yt,b as ge,c as Y,d as Ye,e as ne,f as ee,_ as Ie,h as tt}from"./index-Di6ZDhMq.js";import{b as Ct,a3 as Tt,U as St,D as Dt,g as kt,K as _t,a9 as Ot,S as Pt,h as Oe,s as nt,R as at,q as Mt,B as Nt}from"./naive-ui-DTkP1Nhe.js";import{p as we}from"./useForm-C5x5pFxX.js";import{C as xt,d as Et,F as rt,Q as Ut,R as Wt,e as Ft}from"./vicons-antd-lylIHZTS.js";import{o as Rt,s as Yt,b as Ee,d as $t}from"./lodash-es-D7KfrSKz.js";import{t as It,a as Lt,u as qt}from"./vueuse-BFLXqqnf.js";const ot=Symbol("s-table");function zt(e){vt(ot,e)}function Ht(){return ht(ot)}function Bt(e){const t=O(c(e).loading);_e(()=>c(e).loading,r=>{t.value=r});const n=_(()=>c(t));function a(r){t.value=r}return{getLoading:n,setLoading:a}}var it=(e=>(e.NInput="on-input",e.NInputNumber="on-input",e.NSelect="on-update:value",e.NSwitch="on-update:value",e.NCheckbox="on-update:value",e.NDatePicker="on-update:value",e.NTimePicker="on-update:value",e))(it||{});const J=new Map;J.set("NInput",Ct);J.set("NInputNumber",Tt);J.set("NSelect",St);J.set("NSwitch",Dt);J.set("NCheckbox",kt);J.set("NDatePicker",_t);J.set("NTimePicker",Ot);const At=({component:e="NInput",rule:t=!0,ruleMessage:n,popoverVisible:a},{attrs:r})=>{const o=J.get(e),i=V(o,r);return t?V(Pt,{"display-directive":"show",show:!!a,manual:"manual"},{trigger:()=>i,default:()=>V("span",{style:{color:"red",width:"90px",display:"inline-block"}},{default:()=>n})}):i};function Vt(e){return!e||!e.getBoundingClientRect?0:e.getBoundingClientRect()}function jt(e){const t=document.documentElement,n=t.scrollLeft,a=t.scrollTop,r=t.clientLeft,o=t.clientTop,i=window.pageXOffset,l=window.pageYOffset,s=Vt(e),{left:u,top:h,width:g,height:b}=s,d=(i||n)-(r||0),f=(l||a)-(o||0),p=u+i,y=h+l,S=p-d,k=y-f,N=window.document.documentElement.clientWidth,F=window.document.documentElement.clientHeight;return{left:S,top:k,right:N-g-S,bottom:F-b-k,rightIncludeBody:N-S,bottomIncludeBody:F-k}}function Le(e,t,n){e&&t&&n&&e.addEventListener(t,n,!1)}const be=new Map;let qe;yt||(Le(document,"mousedown",e=>qe=e),Le(document,"mouseup",e=>{for(const{documentHandler:t}of be.values())t(e,qe)}));function ze(e,t){let n=[];return Array.isArray(t.arg)?n=t.arg:n.push(t.arg),function(a,r){const o=t.instance.popperRef,i=a.target,l=r.target,s=!t||!t.instance,u=!i||!l,h=e.contains(i)||e.contains(l),g=e===i,b=n.length&&n.some(f=>f?.contains(i))||n.length&&n.includes(l),d=o&&(o.contains(i)||o.contains(l));s||u||h||g||b||d||t.value()}}const Qt={beforeMount(e,t){be.set(e,{documentHandler:ze(e,t),bindingFn:t.value})},updated(e,t){be.set(e,{documentHandler:ze(e,t),bindingFn:t.value})},unmounted(e){be.delete(e)}};function He(e){return e==="NInput"?"请输入":["NPicker","NSelect","NCheckbox","NRadio","NSwitch","NDatePicker","NTimePicker"].includes(e)?"请选择":""}function Se(e){"@babel/helpers - typeof";return Se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Se(e)}function K(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function E(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function B(e){E(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Se(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Xt(e,t){E(2,arguments);var n=B(e).getTime(),a=K(t);return new Date(n+a)}var Gt={};function Pe(){return Gt}function Kt(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var st=6e4,ut=36e5;function Jt(e){return E(1,arguments),e instanceof Date||Se(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Zt(e){if(E(1,arguments),!Jt(e)&&typeof e!="number")return!1;var t=B(e);return!isNaN(Number(t))}function en(e,t){E(2,arguments);var n=K(t);return Xt(e,-n)}var tn=864e5;function nn(e){E(1,arguments);var t=B(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var a=t.getTime(),r=n-a;return Math.floor(r/tn)+1}function De(e){E(1,arguments);var t=1,n=B(e),a=n.getUTCDay(),r=(a<t?7:0)+a-t;return n.setUTCDate(n.getUTCDate()-r),n.setUTCHours(0,0,0,0),n}function lt(e){E(1,arguments);var t=B(e),n=t.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(n+1,0,4),a.setUTCHours(0,0,0,0);var r=De(a),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var i=De(o);return t.getTime()>=r.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function an(e){E(1,arguments);var t=lt(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var a=De(n);return a}var rn=6048e5;function on(e){E(1,arguments);var t=B(e),n=De(t).getTime()-an(t).getTime();return Math.round(n/rn)+1}function ke(e,t){var n,a,r,o,i,l,s,u;E(1,arguments);var h=Pe(),g=K((n=(a=(r=(o=t?.weekStartsOn)!==null&&o!==void 0?o:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&r!==void 0?r:h.weekStartsOn)!==null&&a!==void 0?a:(s=h.locale)===null||s===void 0||(u=s.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var b=B(e),d=b.getUTCDay(),f=(d<g?7:0)+d-g;return b.setUTCDate(b.getUTCDate()-f),b.setUTCHours(0,0,0,0),b}function ct(e,t){var n,a,r,o,i,l,s,u;E(1,arguments);var h=B(e),g=h.getUTCFullYear(),b=Pe(),d=K((n=(a=(r=(o=t?.firstWeekContainsDate)!==null&&o!==void 0?o:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&r!==void 0?r:b.firstWeekContainsDate)!==null&&a!==void 0?a:(s=b.locale)===null||s===void 0||(u=s.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(g+1,0,d),f.setUTCHours(0,0,0,0);var p=ke(f,t),y=new Date(0);y.setUTCFullYear(g,0,d),y.setUTCHours(0,0,0,0);var S=ke(y,t);return h.getTime()>=p.getTime()?g+1:h.getTime()>=S.getTime()?g:g-1}function sn(e,t){var n,a,r,o,i,l,s,u;E(1,arguments);var h=Pe(),g=K((n=(a=(r=(o=t?.firstWeekContainsDate)!==null&&o!==void 0?o:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&r!==void 0?r:h.firstWeekContainsDate)!==null&&a!==void 0?a:(s=h.locale)===null||s===void 0||(u=s.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),b=ct(e,t),d=new Date(0);d.setUTCFullYear(b,0,g),d.setUTCHours(0,0,0,0);var f=ke(d,t);return f}var un=6048e5;function ln(e,t){E(1,arguments);var n=B(e),a=ke(n,t).getTime()-sn(n,t).getTime();return Math.round(a/un)+1}function C(e,t){for(var n=e<0?"-":"",a=Math.abs(e).toString();a.length<t;)a="0"+a;return n+a}var X={y:function(t,n){var a=t.getUTCFullYear(),r=a>0?a:1-a;return C(n==="yy"?r%100:r,n.length)},M:function(t,n){var a=t.getUTCMonth();return n==="M"?String(a+1):C(a+1,2)},d:function(t,n){return C(t.getUTCDate(),n.length)},a:function(t,n){var a=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h:function(t,n){return C(t.getUTCHours()%12||12,n.length)},H:function(t,n){return C(t.getUTCHours(),n.length)},m:function(t,n){return C(t.getUTCMinutes(),n.length)},s:function(t,n){return C(t.getUTCSeconds(),n.length)},S:function(t,n){var a=n.length,r=t.getUTCMilliseconds(),o=Math.floor(r*Math.pow(10,a-3));return C(o,n.length)}},te={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},cn={G:function(t,n,a){var r=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return a.era(r,{width:"abbreviated"});case"GGGGG":return a.era(r,{width:"narrow"});case"GGGG":default:return a.era(r,{width:"wide"})}},y:function(t,n,a){if(n==="yo"){var r=t.getUTCFullYear(),o=r>0?r:1-r;return a.ordinalNumber(o,{unit:"year"})}return X.y(t,n)},Y:function(t,n,a,r){var o=ct(t,r),i=o>0?o:1-o;if(n==="YY"){var l=i%100;return C(l,2)}return n==="Yo"?a.ordinalNumber(i,{unit:"year"}):C(i,n.length)},R:function(t,n){var a=lt(t);return C(a,n.length)},u:function(t,n){var a=t.getUTCFullYear();return C(a,n.length)},Q:function(t,n,a){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return C(r,2);case"Qo":return a.ordinalNumber(r,{unit:"quarter"});case"QQQ":return a.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,n,a){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return C(r,2);case"qo":return a.ordinalNumber(r,{unit:"quarter"});case"qqq":return a.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,n,a){var r=t.getUTCMonth();switch(n){case"M":case"MM":return X.M(t,n);case"Mo":return a.ordinalNumber(r+1,{unit:"month"});case"MMM":return a.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(r,{width:"wide",context:"formatting"})}},L:function(t,n,a){var r=t.getUTCMonth();switch(n){case"L":return String(r+1);case"LL":return C(r+1,2);case"Lo":return a.ordinalNumber(r+1,{unit:"month"});case"LLL":return a.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(r,{width:"wide",context:"standalone"})}},w:function(t,n,a,r){var o=ln(t,r);return n==="wo"?a.ordinalNumber(o,{unit:"week"}):C(o,n.length)},I:function(t,n,a){var r=on(t);return n==="Io"?a.ordinalNumber(r,{unit:"week"}):C(r,n.length)},d:function(t,n,a){return n==="do"?a.ordinalNumber(t.getUTCDate(),{unit:"date"}):X.d(t,n)},D:function(t,n,a){var r=nn(t);return n==="Do"?a.ordinalNumber(r,{unit:"dayOfYear"}):C(r,n.length)},E:function(t,n,a){var r=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return a.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(r,{width:"short",context:"formatting"});case"EEEE":default:return a.day(r,{width:"wide",context:"formatting"})}},e:function(t,n,a,r){var o=t.getUTCDay(),i=(o-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(i);case"ee":return C(i,2);case"eo":return a.ordinalNumber(i,{unit:"day"});case"eee":return a.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(o,{width:"short",context:"formatting"});case"eeee":default:return a.day(o,{width:"wide",context:"formatting"})}},c:function(t,n,a,r){var o=t.getUTCDay(),i=(o-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(i);case"cc":return C(i,n.length);case"co":return a.ordinalNumber(i,{unit:"day"});case"ccc":return a.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(o,{width:"narrow",context:"standalone"});case"cccccc":return a.day(o,{width:"short",context:"standalone"});case"cccc":default:return a.day(o,{width:"wide",context:"standalone"})}},i:function(t,n,a){var r=t.getUTCDay(),o=r===0?7:r;switch(n){case"i":return String(o);case"ii":return C(o,n.length);case"io":return a.ordinalNumber(o,{unit:"day"});case"iii":return a.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(r,{width:"short",context:"formatting"});case"iiii":default:return a.day(r,{width:"wide",context:"formatting"})}},a:function(t,n,a){var r=t.getUTCHours(),o=r/12>=1?"pm":"am";switch(n){case"a":case"aa":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,n,a){var r=t.getUTCHours(),o;switch(r===12?o=te.noon:r===0?o=te.midnight:o=r/12>=1?"pm":"am",n){case"b":case"bb":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,n,a){var r=t.getUTCHours(),o;switch(r>=17?o=te.evening:r>=12?o=te.afternoon:r>=4?o=te.morning:o=te.night,n){case"B":case"BB":case"BBB":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,n,a){if(n==="ho"){var r=t.getUTCHours()%12;return r===0&&(r=12),a.ordinalNumber(r,{unit:"hour"})}return X.h(t,n)},H:function(t,n,a){return n==="Ho"?a.ordinalNumber(t.getUTCHours(),{unit:"hour"}):X.H(t,n)},K:function(t,n,a){var r=t.getUTCHours()%12;return n==="Ko"?a.ordinalNumber(r,{unit:"hour"}):C(r,n.length)},k:function(t,n,a){var r=t.getUTCHours();return r===0&&(r=24),n==="ko"?a.ordinalNumber(r,{unit:"hour"}):C(r,n.length)},m:function(t,n,a){return n==="mo"?a.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):X.m(t,n)},s:function(t,n,a){return n==="so"?a.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):X.s(t,n)},S:function(t,n){return X.S(t,n)},X:function(t,n,a,r){var o=r._originalDate||t,i=o.getTimezoneOffset();if(i===0)return"Z";switch(n){case"X":return Ae(i);case"XXXX":case"XX":return Z(i);case"XXXXX":case"XXX":default:return Z(i,":")}},x:function(t,n,a,r){var o=r._originalDate||t,i=o.getTimezoneOffset();switch(n){case"x":return Ae(i);case"xxxx":case"xx":return Z(i);case"xxxxx":case"xxx":default:return Z(i,":")}},O:function(t,n,a,r){var o=r._originalDate||t,i=o.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Be(i,":");case"OOOO":default:return"GMT"+Z(i,":")}},z:function(t,n,a,r){var o=r._originalDate||t,i=o.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Be(i,":");case"zzzz":default:return"GMT"+Z(i,":")}},t:function(t,n,a,r){var o=r._originalDate||t,i=Math.floor(o.getTime()/1e3);return C(i,n.length)},T:function(t,n,a,r){var o=r._originalDate||t,i=o.getTime();return C(i,n.length)}};function Be(e,t){var n=e>0?"-":"+",a=Math.abs(e),r=Math.floor(a/60),o=a%60;if(o===0)return n+String(r);var i=t;return n+String(r)+i+C(o,2)}function Ae(e,t){if(e%60===0){var n=e>0?"-":"+";return n+C(Math.abs(e)/60,2)}return Z(e,t)}function Z(e,t){var n=t||"",a=e>0?"-":"+",r=Math.abs(e),o=C(Math.floor(r/60),2),i=C(r%60,2);return a+o+n+i}var Ve=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},dt=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},dn=function(t,n){var a=t.match(/(P+)(p+)?/)||[],r=a[1],o=a[2];if(!o)return Ve(t,n);var i;switch(r){case"P":i=n.dateTime({width:"short"});break;case"PP":i=n.dateTime({width:"medium"});break;case"PPP":i=n.dateTime({width:"long"});break;case"PPPP":default:i=n.dateTime({width:"full"});break}return i.replace("{{date}}",Ve(r,n)).replace("{{time}}",dt(o,n))},fn={p:dt,P:dn},mn=["D","DD"],hn=["YY","YYYY"];function vn(e){return mn.indexOf(e)!==-1}function gn(e){return hn.indexOf(e)!==-1}function je(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var pn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},wn=function(t,n,a){var r,o=pn[t];return typeof o=="string"?r=o:n===1?r=o.one:r=o.other.replace("{{count}}",n.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+r:r+" ago":r};function Ue(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,a=e.formats[n]||e.formats[e.defaultWidth];return a}}var bn={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},yn={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Cn={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Tn={date:Ue({formats:bn,defaultWidth:"full"}),time:Ue({formats:yn,defaultWidth:"full"}),dateTime:Ue({formats:Cn,defaultWidth:"full"})},Sn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Dn=function(t,n,a,r){return Sn[t]};function oe(e){return function(t,n){var a=n!=null&&n.context?String(n.context):"standalone",r;if(a==="formatting"&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,i=n!=null&&n.width?String(n.width):o;r=e.formattingValues[i]||e.formattingValues[o]}else{var l=e.defaultWidth,s=n!=null&&n.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return r[u]}}var kn={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},_n={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},On={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Pn={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Mn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Nn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},xn=function(t,n){var a=Number(t),r=a%100;if(r>20||r<10)switch(r%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},En={ordinalNumber:xn,era:oe({values:kn,defaultWidth:"wide"}),quarter:oe({values:_n,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:oe({values:On,defaultWidth:"wide"}),day:oe({values:Pn,defaultWidth:"wide"}),dayPeriod:oe({values:Mn,defaultWidth:"wide",formattingValues:Nn,defaultFormattingWidth:"wide"})};function ie(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.width,r=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],o=t.match(r);if(!o)return null;var i=o[0],l=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],s=Array.isArray(l)?Wn(l,function(g){return g.test(i)}):Un(l,function(g){return g.test(i)}),u;u=e.valueCallback?e.valueCallback(s):s,u=n.valueCallback?n.valueCallback(u):u;var h=t.slice(i.length);return{value:u,rest:h}}}function Un(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function Wn(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function Fn(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t.match(e.matchPattern);if(!a)return null;var r=a[0],o=t.match(e.parsePattern);if(!o)return null;var i=e.valueCallback?e.valueCallback(o[0]):o[0];i=n.valueCallback?n.valueCallback(i):i;var l=t.slice(r.length);return{value:i,rest:l}}}var Rn=/^(\d+)(th|st|nd|rd)?/i,Yn=/\d+/i,$n={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},In={any:[/^b/i,/^(a|c)/i]},Ln={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},qn={any:[/1/i,/2/i,/3/i,/4/i]},zn={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Hn={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Bn={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},An={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Vn={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},jn={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Qn={ordinalNumber:Fn({matchPattern:Rn,parsePattern:Yn,valueCallback:function(t){return parseInt(t,10)}}),era:ie({matchPatterns:$n,defaultMatchWidth:"wide",parsePatterns:In,defaultParseWidth:"any"}),quarter:ie({matchPatterns:Ln,defaultMatchWidth:"wide",parsePatterns:qn,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:ie({matchPatterns:zn,defaultMatchWidth:"wide",parsePatterns:Hn,defaultParseWidth:"any"}),day:ie({matchPatterns:Bn,defaultMatchWidth:"wide",parsePatterns:An,defaultParseWidth:"any"}),dayPeriod:ie({matchPatterns:Vn,defaultMatchWidth:"any",parsePatterns:jn,defaultParseWidth:"any"})},Xn={code:"en-US",formatDistance:wn,formatLong:Tn,formatRelative:Dn,localize:En,match:Qn,options:{weekStartsOn:0,firstWeekContainsDate:1}},Gn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Kn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Jn=/^'([^]*?)'?$/,Zn=/''/g,ea=/[a-zA-Z]/;function Qe(e,t,n){var a,r,o,i,l,s,u,h,g,b,d,f,p,y;E(2,arguments);var S=String(t),k=Pe(),N=(a=(r=void 0)!==null&&r!==void 0?r:k.locale)!==null&&a!==void 0?a:Xn,F=K((o=(i=(l=(s=void 0)!==null&&s!==void 0?s:void 0)!==null&&l!==void 0?l:k.firstWeekContainsDate)!==null&&i!==void 0?i:(u=k.locale)===null||u===void 0||(h=u.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(F>=1&&F<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var x=K((g=(b=(d=(f=void 0)!==null&&f!==void 0?f:void 0)!==null&&d!==void 0?d:k.weekStartsOn)!==null&&b!==void 0?b:(p=k.locale)===null||p===void 0||(y=p.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&g!==void 0?g:0);if(!(x>=0&&x<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!N.localize)throw new RangeError("locale must contain localize property");if(!N.formatLong)throw new RangeError("locale must contain formatLong property");var $=B(e);if(!Zt($))throw new RangeError("Invalid time value");var q=Kt($),j=en($,q),z={firstWeekContainsDate:F,weekStartsOn:x,locale:N,_originalDate:$},m=S.match(Kn).map(function(v){var w=v[0];if(w==="p"||w==="P"){var D=fn[w];return D(v,N.formatLong)}return v}).join("").match(Gn).map(function(v){if(v==="''")return"'";var w=v[0];if(w==="'")return ta(v);var D=cn[w];if(D)return gn(v)&&je(v,t,String(e)),vn(v)&&je(v,t,String(e)),D(j,v,N.localize,z);if(w.match(ea))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return v}).join("");return m}function ta(e){var t=e.match(Jn);return t?t[1].replace(Zn,"'"):e}function Xe(e,t){var n;E(1,arguments);var a=K((n=void 0)!==null&&n!==void 0?n:2);if(a!==2&&a!==1&&a!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var r=oa(e),o;if(r.date){var i=ia(r.date,a);o=sa(i.restDateString,i.year)}if(!o||isNaN(o.getTime()))return new Date(NaN);var l=o.getTime(),s=0,u;if(r.time&&(s=ua(r.time),isNaN(s)))return new Date(NaN);if(r.timezone){if(u=la(r.timezone),isNaN(u))return new Date(NaN)}else{var h=new Date(l+s),g=new Date(0);return g.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),g.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),g}return new Date(l+s+u)}var pe={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},na=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,aa=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ra=/^([+-])(\d{2})(?::?(\d{2}))?$/;function oa(e){var t={},n=e.split(pe.dateTimeDelimiter),a;if(n.length>2)return t;if(/:/.test(n[0])?a=n[0]:(t.date=n[0],a=n[1],pe.timeZoneDelimiter.test(t.date)&&(t.date=e.split(pe.timeZoneDelimiter)[0],a=e.substr(t.date.length,e.length))),a){var r=pe.timezone.exec(a);r?(t.time=a.replace(r[1],""),t.timezone=r[1]):t.time=a}return t}function ia(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(n);if(!a)return{year:NaN,restDateString:""};var r=a[1]?parseInt(a[1]):null,o=a[2]?parseInt(a[2]):null;return{year:o===null?r:o*100,restDateString:e.slice((a[1]||a[2]).length)}}function sa(e,t){if(t===null)return new Date(NaN);var n=e.match(na);if(!n)return new Date(NaN);var a=!!n[4],r=se(n[1]),o=se(n[2])-1,i=se(n[3]),l=se(n[4]),s=se(n[5])-1;if(a)return ha(t,l,s)?ca(t,l,s):new Date(NaN);var u=new Date(0);return!fa(t,o,i)||!ma(t,r)?new Date(NaN):(u.setUTCFullYear(t,o,Math.max(r,i)),u)}function se(e){return e?parseInt(e):1}function ua(e){var t=e.match(aa);if(!t)return NaN;var n=We(t[1]),a=We(t[2]),r=We(t[3]);return va(n,a,r)?n*ut+a*st+r*1e3:NaN}function We(e){return e&&parseFloat(e.replace(",","."))||0}function la(e){if(e==="Z")return 0;var t=e.match(ra);if(!t)return 0;var n=t[1]==="+"?-1:1,a=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return ga(a,r)?n*(a*ut+r*st):NaN}function ca(e,t,n){var a=new Date(0);a.setUTCFullYear(e,0,4);var r=a.getUTCDay()||7,o=(t-1)*7+n+1-r;return a.setUTCDate(a.getUTCDate()+o),a}var da=[31,null,31,30,31,30,31,31,30,31,30,31];function ft(e){return e%400===0||e%4===0&&e%100!==0}function fa(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(da[t]||(ft(e)?29:28))}function ma(e,t){return t>=1&&t<=(ft(e)?366:365)}function ha(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function va(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function ga(e,t){return t>=0&&t<=59}const pa=$e({name:"EditableCell",components:{FormOutlined:rt,CloseOutlined:Et,CheckOutlined:xt,CellComponent:At},directives:{clickOutside:Qt},props:{value:{type:[String,Number,Boolean,Object],default:""},record:{type:Object},column:{type:Object,default:()=>({})},index:we.number},setup(e){const t=Ht(),n=O(!1),a=O(),r=O(!1),o=O(""),i=O([]),l=O(e.value),s=O(e.value),u=_(()=>e.column?.editComponent||"NInput"),h=_(()=>e.column?.editRule),g=_(()=>c(o)&&c(r)),b=_(()=>{const m=c(u);return["NCheckbox","NRadio"].includes(m)}),d=_(()=>{const m=e.column?.editComponentProps??{},v=e.column?.editComponent??null,w=c(u),D={},T=c(b);let L=T?"checked":"value";const P=c(l);let R=T?ge(P)&&Y(P)?P:!!P:P;w==="NDatePicker"&&(Ye(R)?m.valueFormat?L="formatted-value":R=Xe(R).getTime():ne(R)&&(m.valueFormat?L="formatted-value":R=R.map(fe=>Xe(fe).getTime())));const de=v?it[v]:void 0;return{placeholder:He(c(u)),...D,...Rt(m,"onChange"),[de]:k,[L]:R}}),f=_(()=>{const{editComponentProps:m,editValueMap:v}=e.column,w=c(l);return v&&ee(v)?v(w):c(u).includes("NSelect")?(m?.options??(c(i)||[])).find(P=>`${P.value}`==`${w}`)?.label??w:w}),p=_(()=>{const{align:m="center"}=e.column;return`edit-cell-align-${m}`}),y=_(()=>{const{editable:m}=e.record||{};return!!m});Fe(()=>{s.value=e.value}),Fe(()=>{const{editable:m}=e.column;(Y(m)||Y(c(y)))&&(n.value=!!m||c(y))});function S(){c(y)||c(e.column?.editRow)||(o.value="",n.value=!0,Ge(()=>{c(a)?.focus?.()}))}async function k(m){const v=c(u),w=e.column?.editComponentProps??{};m?m?.target&&Reflect.has(m.target,"value")?l.value=m.target.value:v==="NCheckbox"?l.value=m.target.checked:(Ye(m)||Y(m)||ge(m))&&(l.value=m):l.value=m,v==="NDatePicker"&&(ge(l.value)?w.valueFormat&&(l.value=Qe(l.value,w.valueFormat)):ne(l.value)&&w.valueFormat&&(l.value=l.value.map(T=>{Qe(T,w.valueFormat)})));const D=e.column?.editComponentProps?.onChange;D&&ee(D)&&D(...arguments),t.emit?.("edit-change",{column:e.column,value:c(l),record:ae(e.record)}),await N()}async function N(){const{column:m,record:v}=e,{editRule:w}=m,D=c(l);if(w){if(Y(w)&&!D&&!ge(D)){r.value=!0;const T=c(u);return o.value=He(T),!1}if(ee(w)){const T=await w(D,v);return T?(o.value=T,r.value=!0,!1):(o.value="",!0)}}return o.value="",!0}async function F(m=!0,v=!0){if(v&&!await N())return!1;const{column:w,index:D,record:T}=e;if(!T)return!1;const{key:L}=w,P=c(l);if(!L)return;Yt(T,L,P),m&&t.emit?.("edit-end",{record:T,index:D,key:L,value:P}),n.value=!1}async function x(){e.column?.editRow||await F()}function $(){n.value=!1,l.value=s.value;const{column:m,index:v,record:w}=e,{key:D}=m;r.value=!0,o.value="",t.emit?.("edit-cancel",{record:w,index:v,key:D,value:c(l)})}function q(){if(e.column?.editable||c(y))return;c(u).includes("NInput")&&$()}function j(m){i.value=m}function z(m,v){e.record&&(ne(e.record[m])?e.record[m]?.push(v):e.record[m]=[v])}return e.record&&(z("submitCbs",F),z("validCbs",N),z("cancelCbs",$),e.column.key&&(e.record.editValueRefs||(e.record.editValueRefs={}),e.record.editValueRefs[e.column.key]=l),e.record.onCancelEdit=()=>{ne(e.record?.cancelCbs)&&e.record?.cancelCbs.forEach(m=>m())},e.record.onSubmitEdit=async()=>{if(ne(e.record?.submitCbs)){const m=(e.record?.validCbs||[]).map(T=>T());return(await Promise.all(m)).every(T=>!!T)?((e.record?.submitCbs||[]).forEach(T=>T(!1,!1)),t.emit?.("edit-row-end"),!0):void 0}}),{isEdit:n,handleEdit:S,currentValueRef:l,handleSubmit:F,handleChange:k,handleCancel:$,elRef:a,getComponent:u,getRule:h,onClickOutside:q,ruleMessage:o,getRuleVisible:g,getComponentProps:d,handleOptionsChange:j,getWrapperClass:p,getRowEditable:y,getValues:f,handleEnter:x}}}),wa={class:"editable-cell"},ba={key:0,class:"flex editable-cell-content"},ya={class:"editable-cell-content-comp"},Ca={key:0,class:"editable-cell-action"};function Ta(e,t,n,a,r,o){const i=le("CellComponent"),l=le("CheckOutlined"),s=Oe,u=le("CloseOutlined"),h=le("FormOutlined"),g=gt("click-outside");return I(),G("div",wa,[e.isEdit?pt((I(),G("div",ba,[H("div",ya,[W(i,ye(e.getComponentProps,{component:e.getComponent,popoverVisible:e.getRuleVisible,ruleMessage:e.ruleMessage,rule:e.getRule,class:e.getWrapperClass,ref:"elRef",onOptionsChange:e.handleOptionsChange,onPressEnter:e.handleEnter}),null,16,["component","popoverVisible","ruleMessage","rule","class","onOptionsChange","onPressEnter"])]),e.getRowEditable?re("",!0):(I(),G("div",Ca,[W(s,{class:"mx-2 cursor-pointer",title:"保存"},{default:U(()=>[W(l,{onClick:e.handleSubmit},null,8,["onClick"])]),_:1}),W(s,{class:"mx-2 cursor-pointer",title:"取消"},{default:U(()=>[W(u,{onClick:e.handleCancel},null,8,["onClick"])]),_:1})]))])),[[g,e.onClickOutside]]):(I(),G("div",{key:1,class:"flex items-center editable-cell-content",onClick:t[0]||(t[0]=(...b)=>e.handleEdit&&e.handleEdit(...b))},[Ce(Te(e.getValues)+" ",1),e.column.editRow?re("",!0):(I(),ce(s,{key:0,class:"ml-1 edit-icon"},{default:U(()=>[W(h)]),_:1}))]))])}const Sa=Ie(pa,[["render",Ta]]);function Da(e){return(t,n)=>{const a=e.key,r=t[a];return t.onEdit=async(o,i=!1)=>(i||(t.editable=o),!o&&i?await t.onSubmitEdit?.()?(t.editable=!1,!0):!1:(!o&&!i&&t.onCancelEdit?.(),!0)),V(Sa,{value:r,record:t,column:e,index:n})}}function ka(e){const t=O(c(e).columns);let n=c(e).columns;const a=_(()=>{const d=Ee(c(t));return s(e,d),d||[]}),{hasPermission:r}=tt();function o(d){const f=d.ifShow;let p=!0;return Y(f)&&(p=f),ee(f)&&(p=f(d)),p}const i=(d,f)=>V(nt,null,{trigger:()=>d,default:()=>f}),l=_(()=>{const d=c(a);return Ee(d).filter(p=>r(p.auth)&&o(p)).map(p=>{p.ellipsis=typeof p.ellipsis>"u"?{tooltip:!0}:!1;const{edit:y}=p;if(y&&(p.render=Da(p),y)){const S=p.title;p.title=()=>i(V("div",{class:"flex items-center"},[V("span",{style:{"margin-right":"5px"}},S),V(Oe,{size:14},{default:()=>V(rt)})]),"该列可編輯")}return p})});_e(()=>c(e).columns,d=>{t.value=d,n=d});function s(d,f){const{actionColumn:p}=c(d);p&&!f.find(y=>y.key==="action")&&f.push({...p})}function u(d){const f=Ee(d);if(!ne(f))return;if(!f.length){t.value=[];return}const p=n.map(y=>y.key);if(!Ye(f[0]))t.value=f;else{const y=[];n.forEach(S=>{d.includes(S.key)&&y.push({...S})}),$t(p,f)||y.sort((S,k)=>p.indexOf(S.key)-p.indexOf(k.key)),t.value=y}}function h(){return ae(c(a)).map(f=>({...f,title:f.title,key:f.key,fixed:f.fixed||void 0}))}function g(d){return d?n.map(f=>f.key):n}function b(d,f){!d||!f||n.forEach(p=>{if(p.key===d){Object.assign(p,f);return}})}return{getColumnsRef:a,getCacheColumns:g,setCacheColumnsField:b,setColumns:u,getColumns:h,getPageColumns:l}}const _a={table:{apiSetting:{pageField:"page",sizeField:"pageSize",listField:"list",totalField:"pageCount",countField:"itemCount"},defaultPageSize:10,pageSizes:[10,20,30,40,50]}},{table:Oa}=_a,{apiSetting:Pa,defaultPageSize:Ma,pageSizes:Na}=Oa,xa=Ma,ue=Pa,Ea=Na;function Ua(e,{getPaginationInfo:t,setPagination:n,setLoading:a,tableData:r},o){const i=O([]);Fe(()=>{r.value=c(i)}),_e(()=>c(e).dataSource,()=>{const{dataSource:d}=c(e);d&&(i.value=d)},{immediate:!0});const l=_(()=>{const{rowKey:d}=c(e);return d||(()=>"key")}),s=_(()=>{const d=c(i);return!d||d.length===0?c(i):c(i)});async function u(d){try{a(!0);const{request:f,pagination:p,beforeRequest:y,afterRequest:S}=c(e);if(!f)return;const k=ue.pageField,N=ue.sizeField,F=ue.totalField,x=ue.listField,$=ue.countField;let q={};const{page:j=1,pageSize:z=10}=c(t);Y(p)&&!p||Y(t)?q={}:(q[k]=d&&d[k]||j,q[N]=z);let m={...q,...d};y&&ee(y)&&(m=await y(m)||m);const v=await f(m),w=v[F],D=v[k],T=v[$],L=v[x]?v[x]:[];if(w){const R=Math.ceil(T/z);if(j>R)return n({page:R,itemCount:T}),await u(d)}let P=v[x]?v[x]:[];S&&ee(S)&&(P=await S(P)||P),i.value=P,n({page:D,pageCount:w,itemCount:T}),d&&d[k]&&n({page:d[k]||1}),o("fetch-success",{items:c(P),resultTotal:w})}catch(f){console.error(f),o("fetch-error",f),i.value=[],n({pageCount:0})}finally{a(!1)}}Ke(()=>{setTimeout(()=>{u()},16)});function h(d){i.value=d}function g(){return s.value}async function b(d){await u(d)}return{fetch:u,getRowKey:l,getDataSourceRef:s,getDataSource:g,setTableData:h,reload:b}}function Wa(e){const t=O({}),n=O(!0);_e(()=>c(e).pagination,s=>{!Y(s)&&s&&(t.value={...c(t),...s??{}})});const a=_(()=>{const{pagination:s}=c(e);return!c(n)||Y(s)&&!s?!1:{page:1,pageSize:xa,pageSizes:Ea,showSizePicker:!0,showQuickJumper:!0,prefix:u=>`共 ${u.itemCount} 条`,...Y(s)?{}:s,...c(t)}});function r(s){const u=c(a);t.value={...Y(u)?{}:u,...s}}function o(){return c(a)}function i(){return c(n)}async function l(s){n.value=s}return{getPagination:o,getPaginationInfo:a,setShowPagination:l,getShowPagination:i,setPagination:r}}const Fa={...at.props,title:{type:String,default:null},titleTooltip:{type:String,default:null},size:{type:String,default:"medium"},dataSource:{type:[Object],default:()=>[]},columns:{type:[Array],default:()=>[],required:!0},beforeRequest:{type:Function,default:null},request:{type:Function,default:null},afterRequest:{type:Function,default:null},rowKey:{type:[String,Function],default:void 0},pagination:{type:[Object,Boolean],default:()=>{}},showPagination:{type:[String,Boolean],default:"auto"},actionColumn:{type:Object,default:null},canResize:we.bool.def(!0),resizeHeightOffset:we.number.def(0),striped:we.bool.def(!1)};function Ra(e,t=150,n){let a=()=>{e()};a=qt(a,t);const o=()=>{window.addEventListener("resize",a)},i=()=>{window.removeEventListener("resize",a)};return It(()=>{o()}),Lt(()=>{i()}),[o,i]}const Ya={class:"table-toolbar"},$a={class:"flex items-center table-toolbar-left"},Ia={key:0,class:"table-toolbar-left-title"},La={class:"flex items-center leading-none table-toolbar-right"},qa={class:"s-table"},za=$e({__name:"Table",props:{...Fa},emits:["fetch-success","fetch-error","update:checked-row-keys","edit-end","edit-cancel","edit-row-end","edit-change"],setup(e,{expose:t,emit:n}){const a=n,r=e,o=O(150),i=O(null),l=O(null);let s;const u=O(r.striped||!1),h=O([]),g=O(),b=_(()=>({...r,...c(g)})),d=O(c(b).size||"medium"),{getLoading:f,setLoading:p}=Bt(b),{getPaginationInfo:y,setPagination:S}=Wa(b),{getDataSourceRef:k,getDataSource:N,getRowKey:F,reload:x}=Ua(b,{getPaginationInfo:y,setPagination:S,tableData:h,setLoading:p},a),{getPageColumns:$,setColumns:q,getColumns:j,getCacheColumns:z,setCacheColumnsField:m}=ka(b);function v(M){S({page:M}),x()}function w(M){S({page:1,pageSize:M}),x()}const D=_(()=>d.value),T=_(()=>{const M=c(k),A=M.length?`${c(o)}px`:"auto";return{...c(b),loading:c(f),columns:ae(c($)),rowKey:c(F),data:M,size:c(D),remote:!0,"max-height":A,title:""}}),L=_(()=>ae(c(y)));function P(M){g.value={...c(g),...M}}const R={reload:x,setColumns:q,setLoading:p,setProps:P,getColumns:j,getDataSource:N,getPageColumns:$,getCacheColumns:z,setCacheColumnsField:m,emit:a},de=_(()=>{const{canResize:M}=c(b);return M});async function fe(){const M=c(i);if(!M||!c(de))return;const A=M?.$el,me=A.querySelector(".n-data-table-thead "),{bottomIncludeBody:he}=jt(me),Me=64;let Q=2,Ne=24;if(!Y(c(L)))if(s=A.querySelector(".n-data-table__pagination"),s){const mt=s.offsetHeight;Q+=mt||0}else Q+=28;let ve=he-(Me+Q+Ne+(r.resizeHeightOffset||0));const xe=r.maxHeight;ve=xe&&xe<ve?xe:ve,o.value=ve}return Ra(fe,280),Ke(()=>{Ge(()=>{fe()})}),zt({...R,wrapRef:l,getBindValues:T}),t(R),(M,A)=>{const me=Oe,he=nt,Me=at;return I(),G(Je,null,[H("div",Ya,[H("div",$a,[r.title?(I(),G("div",Ia,[Ce(Te(r.title)+" ",1),r.titleTooltip?(I(),ce(he,{key:0,trigger:"hover"},{trigger:U(()=>[W(me,{size:"18",class:"ml-1 text-gray-400 cursor-pointer"},{default:U(()=>[W(c(Ut))]),_:1})]),default:U(()=>[Ce(" "+Te(r.titleTooltip),1)]),_:1})):re("",!0)])):re("",!0),Re(M.$slots,"tableTitle",{},void 0,!0)]),H("div",La,[W(he,{trigger:"hover"},{trigger:U(()=>[H("div",{class:"table-toolbar-right-icon",onClick:A[0]||(A[0]=(...Q)=>c(x)&&c(x)(...Q))},[W(me,{size:"18"},{default:U(()=>[W(c(Wt))]),_:1})])]),default:U(()=>[A[1]||(A[1]=H("span",null,"重新整理",-1))]),_:1})])]),H("div",qa,[W(Me,ye({ref_key:"tableElRef",ref:i},T.value,{striped:u.value,pagination:L.value,"onUpdate:page":v,"onUpdate:pageSize":w}),Ze({_:2},[et(Object.keys(M.$slots),Q=>({name:Q,fn:U(Ne=>[Re(M.$slots,Q,wt(bt(Ne)),void 0,!0)])}))]),1040,["striped","pagination"])])],64)}}}),tr=Ie(za,[["__scopeId","data-v-7beda688"]]),Ha=$e({name:"TableAction",components:{DownOutlined:Ft},props:{actions:{type:Array,default:null,required:!0},dropDownActions:{type:Array,default:null},style:{type:String,default:"button"},select:{type:Function,default:()=>{}}},setup(e){const{hasPermission:t}=tt(),n=e.style==="button"?"default":e.style==="text"?"primary":"default",a=e.style==="button"?void 0:e.style==="text"?!0:void 0,r=_(()=>({text:a,type:n,size:"small"})),o=_(()=>(ae(e.dropDownActions)||[]).filter(s=>t(s.auth)&&i(s)).map(s=>{const{popConfirm:u}=s;return{size:"small",text:a,type:n,...s,...u,onConfirm:u?.confirm,onCancel:u?.cancel}}));function i(s){const u=s.ifShow;let h=!0;return Y(u)&&(h=u),ee(u)&&(h=u(s)),h}return{getActions:_(()=>(ae(e.actions)||[]).filter(s=>t(s.auth)&&i(s)).map(s=>{const{popConfirm:u}=s;return{size:"small",text:a,type:n,...s,...u||{},onConfirm:u?.confirm,onCancel:u?.cancel,enable:!!u}})),getDropdownList:o,getMoreProps:r}}}),Ba={class:"tableAction"},Aa={class:"flex items-center justify-center"},Va={class:"flex items-center"};function ja(e,t,n,a,r,o){const i=Oe,l=Nt,s=le("DownOutlined"),u=Mt;return I(),G("div",Ba,[H("div",Aa,[(I(!0),G(Je,null,et(e.getActions,(h,g)=>(I(),ce(l,ye({key:`${g}-${h.label}`,ref_for:!0},h,{class:"mx-1"}),Ze({default:U(()=>[Ce(Te(h.label)+" ",1)]),_:2},[h.hasOwnProperty("icon")?{name:"icon",fn:U(()=>[W(i,{component:h.icon},null,8,["component"])]),key:"0"}:void 0]),1040))),128)),e.dropDownActions&&e.getDropdownList.length?(I(),ce(u,{key:0,trigger:"hover",options:e.getDropdownList,onSelect:e.select},{default:U(()=>[Re(e.$slots,"more"),e.$slots.more?re("",!0):(I(),ce(l,ye({key:0},e.getMoreProps,{class:"mx-1","icon-placement":"right"}),{default:U(()=>[H("div",Va,[t[0]||(t[0]=H("span",null,"更多",-1)),W(i,{size:"14",class:"ml-1"},{default:U(()=>[W(s)]),_:1})])]),_:1},16))]),_:3},8,["options","onSelect"])):re("",!0)])])}const nr=Ie(Ha,[["render",ja]]);export{tr as B,nr as T};

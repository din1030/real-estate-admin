import{g as ee,s as K}from"./index-C-seUybK.js";import{_ as te}from"./CreateDrawer.vue_vue_type_script_setup_true_lang-_hGDvsJs.js";import{S as ne,e as le,l as ae,F as oe}from"./vicons-antd-lylIHZTS.js";import{ah as se,al as ue,w as ie,M as pe,b as re,h as de,a8 as _e,a7 as ce,r as me,q as fe,B as ve,F as ge,d as ye,e as be,V as he,W as ke,L as xe}from"./naive-ui-DTkP1Nhe.js";import{k as we,r as o,c as Te,e as Ce,o as De,Q as N,R as k,S as r,a3 as e,a4 as t,j as u,N as i,a5 as S,$ as T,a2 as Me}from"./vue-iyKSyPgD.js";import"./pinia-B-rzt09u.js";import"./lodash-es-D7KfrSKz.js";import"./vue-quill-Cpj98o6Y.js";import"./vue-router-BT-sy4oo.js";import"./vicons-ionicons5-CwthGeTe.js";const Oe={class:"n-layout-page-header"},Ue={class:"flex items-center"},ze={class:"flex items-center"},Ke={class:"w-full menu"},Ne={class:"py-3 menu-list"},Se={key:0,class:"flex items-center justify-center py-4"},Pe=we({__name:"menu",setup(Be){const B={label:{required:!0,message:"请输入标题",trigger:"blur"},path:{required:!0,message:"请输入路径",trigger:"blur"}},C=o(null),D=o(),g=se(),I=ue();let y=o([]),d=o([]);const _=o([]),M=o(!0),R=o(!1),x=o(!1),c=o(""),w=o(""),O=o(""),j=Te(()=>!y.value.length),L=o([{label:"添加顶级菜单",key:"home",disabled:!1},{label:"添加子菜单",key:"son",disabled:j}]),a=Ce({type:1,label:"",subtitle:"",path:"",auth:"",openType:1});function V(l){O.value=l==="home"?"添加顶栏菜单":`添加子菜单：${c.value}`,$()}function $(){const{openDrawer:l}=D.value;l()}function q(l){if(l.length){const n=K(i(_),l[0]);y.value=l,c.value=n.label,Object.assign(a,n),x.value=!0}else x.value=!1,y.value=[],c.value=""}function A(){I.info({title:"提示",content:"您确定想刪除此权限吗?",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{g.success("刪除成功")},onNegativeClick:()=>{g.error("已取消")}})}function E(){const l=K(i(_),y.value[0]);Object.assign(a,l)}function F(){C.value.validate(l=>{l?g.error("请填写完整信息"):g.error("抱歉，您没有该权限")})}function P(){d.value.length?d.value=[]:d.value=i(_).map(l=>l.key)}De(async()=>{const l=await ee(),n=l.list.map(m=>m.key);Object.assign(a,n),_.value=l.list,M.value=!1});function H(l){d.value=l}return(l,n)=>{const m=ie,b=de,f=ve,Q=fe,h=me,v=re,W=_e,G=ce,U=pe,J=ge,p=be,z=ke,X=he,Y=ye,Z=xe;return k(),N("div",null,[r("div",Oe,[e(m,{bordered:!1,title:"菜单权限管理"},{default:t(()=>[...n[6]||(n[6]=[u(" 页面数据为 Mock 示例数据，非真实数据。 ",-1)])]),_:1})]),e(Z,{class:"mt-4",cols:"1 s:1 m:1 l:3 xl:3 2xl:3",responsive:"screen","x-gap":12},{default:t(()=>[e(U,{span:"1"},{default:t(()=>[e(m,{segmented:{content:!0},bordered:!1,size:"small"},{header:t(()=>[e(h,null,{default:t(()=>[e(Q,{trigger:"hover",onSelect:V,options:L.value},{default:t(()=>[e(f,{type:"info",ghost:"","icon-placement":"right"},{icon:t(()=>[r("div",Ue,[e(b,{size:"14"},{default:t(()=>[e(i(le))]),_:1})])]),default:t(()=>[n[7]||(n[7]=u(" 添加菜单 ",-1))]),_:1})]),_:1},8,["options"]),e(f,{type:"info",ghost:"","icon-placement":"left",onClick:P},{icon:t(()=>[r("div",ze,[e(b,{size:"14"},{default:t(()=>[e(i(ae))]),_:1})])]),default:t(()=>[u(" 全部"+T(i(d).length?"收起":"展开")+" ",1)]),_:1})]),_:1})]),default:t(()=>[r("div",Ke,[e(v,{type:"input",value:w.value,"onUpdate:value":n[0]||(n[0]=s=>w.value=s),placeholder:"输入菜单名称搜索"},{suffix:t(()=>[e(b,{size:"18",class:"cursor-pointer"},{default:t(()=>[e(i(ne))]),_:1})]),_:1},8,["value"]),r("div",Ne,[M.value?(k(),N("div",Se,[e(W,{size:"medium"})])):(k(),S(G,{key:1,"block-line":"",cascade:"",checkable:"","virtual-scroll":!0,pattern:w.value,data:_.value,expandedKeys:i(d),style:{"max-height":"650px",overflow:"hidden"},"onUpdate:selectedKeys":q,"onUpdate:expandedKeys":H},null,8,["pattern","data","expandedKeys"]))])])]),_:1})]),_:1}),e(U,{span:"2"},{default:t(()=>[e(m,{segmented:{content:!0},bordered:!1,size:"small"},{header:t(()=>[e(h,null,{default:t(()=>[e(b,{size:"18"},{default:t(()=>[e(i(oe))]),_:1}),r("span",null,"編輯菜单"+T(c.value?`：${c.value}`:""),1)]),_:1})]),default:t(()=>[e(J,{type:"info",closable:""},{default:t(()=>[...n[8]||(n[8]=[u(" 从菜单列表选择一项后，进行編輯",-1)])]),_:1}),x.value?(k(),S(Y,{key:0,model:a,rules:B,ref_key:"formRef",ref:C,"label-placement":"left","label-width":100,class:"py-4"},{default:t(()=>[e(p,{label:"类型",path:"type"},{default:t(()=>[r("span",null,T(a.type===1?"侧边栏菜单":""),1)]),_:1}),e(p,{label:"标题",path:"label"},{default:t(()=>[e(v,{placeholder:"请输入标题",value:a.label,"onUpdate:value":n[1]||(n[1]=s=>a.label=s)},null,8,["value"])]),_:1}),e(p,{label:"副标题",path:"subtitle"},{default:t(()=>[e(v,{placeholder:"请输入副标题",value:a.subtitle,"onUpdate:value":n[2]||(n[2]=s=>a.subtitle=s)},null,8,["value"])]),_:1}),e(p,{label:"路径",path:"path"},{default:t(()=>[e(v,{placeholder:"请输入路径",value:a.path,"onUpdate:value":n[3]||(n[3]=s=>a.path=s)},null,8,["value"])]),_:1}),e(p,{label:"打开方式",path:"openType"},{default:t(()=>[e(X,{value:a.openType,"onUpdate:value":n[4]||(n[4]=s=>a.openType=s),name:"openType"},{default:t(()=>[e(h,null,{default:t(()=>[e(z,{value:1},{default:t(()=>[...n[9]||(n[9]=[u("当前窗口",-1)])]),_:1}),e(z,{value:2},{default:t(()=>[...n[10]||(n[10]=[u("新窗口",-1)])]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),e(p,{label:"菜单权限",path:"auth"},{default:t(()=>[e(v,{placeholder:"请输入权限，多个权限用，分割",value:a.auth,"onUpdate:value":n[5]||(n[5]=s=>a.auth=s)},null,8,["value"])]),_:1}),e(p,{path:"auth",style:{"margin-left":"100px"}},{default:t(()=>[e(h,null,{default:t(()=>[e(f,{type:"primary",loading:R.value,onClick:F},{default:t(()=>[...n[11]||(n[11]=[u("保存修改",-1)])]),_:1},8,["loading"]),e(f,{onClick:E},{default:t(()=>[...n[12]||(n[12]=[u("重置",-1)])]),_:1}),e(f,{onClick:A},{default:t(()=>[...n[13]||(n[13]=[u("刪除",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])):Me("",!0)]),_:1})]),_:1})]),_:1}),e(te,{ref_key:"createDrawerRef",ref:D,title:O.value},null,8,["title"])])}}});export{Pe as default};

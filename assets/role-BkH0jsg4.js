import{T as w,B as W}from"./TableAction-CONmg4Nr.js";import{u as z,B as G}from"./useForm-D5MqMP7q.js";import{g as J,a as X}from"./index-PtJr05kU.js";import{m as R,k as Y,r as n,e as Z,o as ee,Q as te,R as oe,S as A,a3 as t,a4 as o,N as i,j as m,$ as M}from"./vue-iyKSyPgD.js";import{H as ne,ah as ae,w as le,a5 as se,b as ie,B as ce,h as ue,a7 as re,r as de}from"./naive-ui-DTkP1Nhe.js";import{_ as me}from"./CreateModal.vue_vue_type_script_setup_true_lang-RUqR-yfU.js";import{_ as pe}from"./EditModal.vue_vue_type_script_setup_true_lang-Bv4Ssxu5.js";import{P as fe}from"./vicons-antd-lylIHZTS.js";import"./lodash-es-D7KfrSKz.js";import"./vueuse-BFLXqqnf.js";import"./pinia-B-rzt09u.js";import"./vue-quill-Cpj98o6Y.js";import"./vue-router-DhdgYiHa.js";import"./vicons-ionicons5-CwthGeTe.js";import"./useModal-DE1Xafwr.js";const _e=[{title:"ID",key:"id",width:80,defaultSortOrder:"descend"},{title:"帳號",key:"account",width:120},{title:"姓名",key:"name",width:120},{title:"手機號碼",width:120,key:"mobile"},{title:"備註",key:"note"},{title:"狀態",key:"isActive",width:100,render(p){return R(ne,{type:p.isActive?"success":"error"},{default:()=>p.isActive?"啟用":"停用"})}}],ve=[{id:1,account:"ADMIN0001",name:"王小明",mobile:"0912345678",note:"TEST",isActive:!0},{id:2,account:"ADMIN0002",name:"李小華",mobile:"0922888111",note:"測試",isActive:!1},{id:3,account:"ADMIN0003",name:"陳大雄",mobile:"0933777888",note:"測試帳號",isActive:!1},{id:4,account:"ADMIN0004",name:"林美麗",mobile:"0955666222",note:"",isActive:!0},{id:5,account:"ADMIN0005",name:"張建國",mobile:"0966123456",note:"",isActive:!0}];function he(){return Promise.resolve(ve)}const ke={class:"n-layout-page-header"},ye={class:"py-3 menu-list"},Pe=Y({__name:"role",setup(p){const h=ae(),k=n(),y=n(),b=n(),f=n(!1),_=n(!1),u=n(!1),T=n(""),r=n([]),l=n([]),c=n(["console","step-form"]),N=[{field:"status",component:"NSelect",defaultValue:1,label:"帳號狀態",componentProps:{placeholder:"選擇帳號狀態",options:[{label:"全部",value:1},{label:"啟用",value:2},{label:"停用",value:3}],onUpdateValue:e=>{console.log(e)}}},{field:"keyword",component:"NInput",label:"關鍵字",componentProps:{placeholder:"",onInput:e=>{console.log(e)}}}],x=Z({width:160,title:"操作",key:"action",fixed:"right",render(e){return R(w,{style:"button",actions:[{label:"編輯",onClick:U.bind(null,e),ifShow:()=>!0,auth:["basic_list"]},{label:"刪除",onClick:P.bind(null,e),ifShow:()=>!0,auth:["basic_list"]}]})}}),[C,{getFieldsValue:be}]=z({gridProps:{cols:"1 s:1 m:2 l:3 xl:4 2xl:4"},labelWidth:80,schemas:N}),D=async()=>{const e=await he();return{list:e,total:e.length}};function S(){y.value.openModal()}function B(e){console.log(e)}function I(){k.value.reload()}function K(e){e.preventDefault(),_.value=!0,setTimeout(()=>{f.value=!1,h.success("提交成功"),I(),_.value=!1},200)}function U(e){console.log("点击了編輯",e),b.value.showModal(e)}function P(e){console.log("点击了刪除",e),h.info("点击了刪除")}function V(e){c.value=[c.value,...e]}function E(e){l.value=e}function F(){l.value.length?l.value=[]:l.value=r.value.map(e=>e.key)}function L(){u.value?(c.value=[],u.value=!1):(c.value=X(r.value),u.value=!0)}return ee(async()=>{const e=await J();l.value=e?.list.map(a=>a.key),r.value=e?.list}),(e,a)=>{const v=le,H=ie,$=ue,d=ce,O=re,j=de,q=se;return oe(),te("div",null,[A("div",ke,[t(v,{bordered:!1,title:"管理員設定"})]),t(v,{bordered:!1},{default:o(()=>[t(i(G),{onRegister:i(C),onSubmit:e.handleSubmit,onReset:e.handleReset},{statusSlot:o(({model:s,field:g})=>[t(H,{value:s[g],"onUpdate:value":Q=>s[g]=Q},null,8,["value","onUpdate:value"])]),_:1},8,["onRegister","onSubmit","onReset"])]),_:1}),t(v,{bordered:!1,class:"mt-4 proCard"},{default:o(()=>[t(i(W),{columns:i(_e),request:D,"row-key":s=>s.id,ref_key:"actionRef",ref:k,actionColumn:x,"onUpdate:checkedRowKeys":B},{tableTitle:o(()=>[t(d,{type:"primary",onClick:S},{icon:o(()=>[t($,null,{default:o(()=>[t(i(fe))]),_:1})]),default:o(()=>[a[1]||(a[1]=m(" 新增管理員 ",-1))]),_:1})]),action:o(()=>[t(i(w))]),_:1},8,["columns","row-key","actionColumn"])]),_:1}),t(q,{show:f.value,"onUpdate:show":a[0]||(a[0]=s=>f.value=s),"show-icon":!1,preset:"dialog",title:T.value},{action:o(()=>[t(j,null,{default:o(()=>[t(d,{type:"info",ghost:"","icon-placement":"left",onClick:F},{default:o(()=>[m(" 全部"+M(l.value.length?"收起":"展开"),1)]),_:1}),t(d,{type:"info",ghost:"","icon-placement":"left",onClick:L},{default:o(()=>[m(" 全部"+M(u.value?"取消":"选择"),1)]),_:1}),t(d,{type:"primary",loading:_.value,onClick:K},{default:o(()=>[...a[2]||(a[2]=[m("提交",-1)])]),_:1},8,["loading"])]),_:1})]),default:o(()=>[A("div",ye,[t(O,{"block-line":"",cascade:"",checkable:"","virtual-scroll":!0,data:r.value,expandedKeys:l.value,"checked-keys":c.value,style:{"max-height":"950px",overflow:"hidden"},"onUpdate:checkedKeys":V,"onUpdate:expandedKeys":E},null,8,["data","expandedKeys","checked-keys"])])]),_:1},8,["show","title"]),t(me,{ref_key:"createModalRef",ref:y},null,512),t(pe,{ref_key:"editModalRef",ref:b},null,512)])}}});export{Pe as default};
